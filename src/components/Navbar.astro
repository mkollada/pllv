---
import { Image } from 'astro:assets'
import porchlightPresents from '../assets/porchlight-presents.png'
import shows from '../assets/shows.svg?url'
import supportUs from '../assets/support-us.svg?url'
import archive from '../assets/archive.svg?url'
import contact from '../assets/contact.svg?url'
const pathname = Astro.url.pathname.replace(/\/$/, '') || '/'
const base = import.meta.env.BASE_URL.replace(/\/$/, '') || ''
const isActive = (path: string) => pathname === path || pathname === `${base}${path}`
---

<nav class="flex flex-col items-center justify-center w-full px-4 py-4 md:w-[85%] md:px-0">
  <!-- Porchlight Presents Logo -->
  <div
    class="flex flex-col items-center justify-center w-full max-w-[92vw] md:w-[75%] md:max-w-none"
  >
    <a href="/" class="block w-full">
      <Image
        src={porchlightPresents}
        alt="Porchlight Presents"
        widths={[480, 768, 1024, 1440]}
        sizes="(max-width: 768px) 92vw, 768px"
        class="w-full min-w-0 object-contain"
      />
    </a>
  </div>
  <!-- Navigation Links: always horizontal -->
  <div class="flex flex-col items-center justify-center w-full mt-4">
    <ul class="flex flex-row justify-center gap-6 font-semibold text-xs md:text-sm font-sans">
      <!-- <li>
        <a href="/" class="hover:underline active:opacity-80">HOME</a>
      </li> -->
      <li>
        <a
          href="/shows"
          class={`hover:underline active:opacity-80${isActive('/our-shows') ? ' underline' : ''}`}
        >
          {
            isActive('/our-shows') ? (
              <img src={shows} alt="Shows" class="h-6 w-auto object-contain md:h-7" />
            ) : (
              'SHOWS'
            )
          }
        </a>
      </li>
      <li>
        <a
          href="/support-us"
          class={`hover:underline active:opacity-80${isActive('/support-us') ? ' underline' : ''}`}
        >
          {
            isActive('/support-us') ? (
              <img src={supportUs} alt="Support Us" class="h-6 w-auto object-contain md:h-7" />
            ) : (
              'SUPPORT US'
            )
          }
        </a>
      </li>
      <li>
        <a
          href="/archive"
          class={`hover:underline active:opacity-80${isActive('/archive') ? ' underline' : ''}`}
        >
          {
            isActive('/archive') ? (
              <img src={archive} alt="Archive" class="h-6 w-auto object-contain md:h-7" />
            ) : (
              'ARCHIVE'
            )
          }
        </a>
      </li>
      <li>
        <a
          href="/get-in-touch"
          class={`hover:underline active:opacity-80${isActive('/get-in-touch') ? ' underline' : ''}`}
        >
          {
            isActive('/get-in-touch') ? (
              <img src={contact} alt="Contact" class="h-6 w-auto object-contain md:h-7" />
            ) : (
              'CONTACT'
            )
          }
        </a>
      </li>
    </ul>
  </div>
</nav>
